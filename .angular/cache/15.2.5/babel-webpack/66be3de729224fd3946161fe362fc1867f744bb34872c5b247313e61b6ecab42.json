{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../path/prediction-service.service\";\nexport class StatisticsComponent {\n  constructor(predictionService) {\n    this.predictionService = predictionService;\n    /*\r\n      CT_folder: string | null = null;\r\n      PET_folder: string | null = null;\r\n     // plotUrl!: string;\r\n     // input_dir = '../dummyData/A200';\r\n     // imageURL!: string;\r\n    \r\n    //  constructor(private http: HttpClient) { }\r\n      constructor() { }\r\n      \r\n      ngOnInit() {\r\n        //const inputDir = '../dummyData/A200';\r\n        // Set the URL of the API endpoint that returns the plot data\r\n        //this.plotUrl = `/api/plot?input_dir=${this.input_dir}`;\r\n      }\r\n      \r\n      \r\n      //we take CT and PET folder input here and\r\n      onFileSelected(event: any, folderType: string) {\r\n        const files = event.target.files;\r\n        const fileArr = Array.prototype.slice.call(files);\r\n      \r\n        // Check if all files in folder are DICOM format\r\n        const invalidFiles = fileArr.filter(file => !file.name.endsWith('.dcm'));\r\n        if (invalidFiles.length > 0) {\r\n          alert(`Invalid files in ${folderType} folder. Only DICOM files are allowed.`);\r\n          return;\r\n        }\r\n    \r\n        // Store folder path based on folder type\r\n        if (folderType === 'CT') {\r\n        this.CT_folder = files[0].webkitRelativePath.split(files[0].name)[0];\r\n        } else if (folderType === 'PET') {\r\n          this.PET_folder = files[0].webkitRelativePath.split(files[0].name)[0];\r\n        }\r\n    \r\n      }\r\n      \r\n      //to prediction\r\n      onUpload() {\r\n        // Check if both folders are selected\r\n        if (!this.CT_folder || !this.PET_folder) {\r\n          alert('Please select both CT and PET folders.');\r\n          return;\r\n        }\r\n      \r\n        console.log(\"onUpload() ok\");\r\n    \r\n        if (this.CT_folder.length > 0 && this.PET_folder.length > 0) {\r\n          const CTData = new FormData();\r\n          const PETData = new FormData();\r\n          for (let i = 0; i < this.CT_folder.length; i++) {\r\n            CTData.append(\"file[]\", this.CT_folder[i], this.CT_folder[i].name);\r\n          }\r\n          // Call your service method and pass formData as parameter\r\n          this.myService.uploadFolder(formData).subscribe(result => {\r\n            console.log(result);\r\n          });\r\n        }\r\n    \r\n        // Call prediction class with folder paths\r\n        //this.predictionService.predict(this.CT_folder, this.PET_folder).subscribe(result => {\r\n          // handle result here\r\n        //}, error => {\r\n        //  console.log(error);\r\n        //});\r\n      }\r\n        */\n    this.ctFolder = null;\n    this.petFolder = null;\n  }\n  ngOnInit() {}\n  onFolderSelected(event, folderType) {\n    const files = event?.target?.files;\n    if (files?.length) {\n      const allowedExtensions = ['dcm'];\n      const selectedFiles = Array.from(files);\n      const selectedFileNames = selectedFiles.map(file => file.name);\n      const invalidFiles = selectedFileNames.filter(name => {\n        const extension = name.split('.').pop();\n        return extension && !allowedExtensions.includes(extension);\n      });\n      if (invalidFiles.length > 0) {\n        console.log(`Invalid ${folderType} files: ${invalidFiles.join(', ')}`);\n        return;\n      }\n      if (folderType === 'CT') {\n        this.ctFolder = selectedFiles[0];\n      } else if (folderType === 'PET') {\n        this.petFolder = selectedFiles[0];\n      }\n    }\n  }\n  onUpload() {\n    if (this.ctFolder && this.petFolder) {\n      this.predictionService.predictionResults(this.ctFolder, this.petFolder);\n      console.log(\"ok\");\n    }\n  }\n}\nStatisticsComponent.ɵfac = function StatisticsComponent_Factory(t) {\n  return new (t || StatisticsComponent)(i0.ɵɵdirectiveInject(i1.PredictionServiceService));\n};\nStatisticsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: StatisticsComponent,\n  selectors: [[\"app-statistics\"]],\n  decls: 29,\n  vars: 0,\n  consts: [[1, \"card\"], [1, \"card-head\"], [1, \"card-body\"], [\"for\", \"ctrl\"], [\"type\", \"file\", \"webkitdirectory\", \"\", \"directory\", \"\", \"required\", \"\", 3, \"change\"], [\"type\", \"submit\", 2, \"background-color\", \"#04383f\", \"color\", \"aliceblue\", \"margin\", \"5px\", \"border-radius\", \"5px\", \"width\", \"150px\", \"height\", \"25px\", 3, \"click\"]],\n  template: function StatisticsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Diagnosis\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"div\", 0)(4, \"div\", 1);\n      i0.ɵɵtext(5, \"Please upload CT and PET scans in the respective fields\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 2)(7, \"label\", 3);\n      i0.ɵɵtext(8, \"CT Scans\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 4);\n      i0.ɵɵlistener(\"change\", function StatisticsComponent_Template_input_change_9_listener($event) {\n        return ctx.onFolderSelected($event, \"CT\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"label\", 3);\n      i0.ɵɵtext(11, \"PET Scans\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 4);\n      i0.ɵɵlistener(\"change\", function StatisticsComponent_Template_input_change_12_listener($event) {\n        return ctx.onFolderSelected($event, \"PET\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function StatisticsComponent_Template_button_click_13_listener() {\n        return ctx.onUpload();\n      });\n      i0.ɵɵtext(14, \"Upload\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 0)(16, \"div\", 1);\n      i0.ɵɵtext(17, \"Results\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 2);\n      i0.ɵɵtext(19, \" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quas ducimus soluta, quasi aut ipsa non, ullam enim rem repudiandae, vitae provident animi. Inventore rerum, voluptas optio dignissimos blanditiis modi illo! \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 0)(21, \"div\", 1);\n      i0.ɵɵtext(22, \"3D visualization\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 2);\n      i0.ɵɵtext(24, \" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quas ducimus soluta, quasi aut ipsa non, ullam enim rem repudiandae, vitae provident animi. Inventore rerum, voluptas optio dignissimos blanditiis modi illo! \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(25, \"br\")(26, \"br\")(27, \"hr\")(28, \"br\");\n    }\n  },\n  styles: [\"h1[_ngcontent-%COMP%] {\\n  margin-left: 1.5rem;\\n  font-size: 24px;\\n  font-weight: 700;\\n  color: #04383f;\\n}\\n\\n.card-body[_ngcontent-%COMP%] {\\n  font-weight: 50;\\n  color: #04383f;\\n}\\n\\n.card-head[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: bold;\\n  color: #04383f;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border: 2px solid #aaa;\\n  border-radius: 10px;\\n  margin: 8px 0;\\n  outline: none;\\n  padding: 8px;\\n  box-sizing: border-box;\\n  transition: 0.3s;\\n}\\n\\ninput[_ngcontent-%COMP%]:focus {\\n  border-color: #04383f;\\n  box-shadow: 0 0 8px 0 #04383f;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc3RhdGlzdGljcy9zdGF0aXN0aWNzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksbUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxjQUFBO0FBQ0o7O0FBRUE7RUFDSSxlQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUVBO0VBQ0ksZUFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUVBO0VBQ0ksV0FBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0FBQ0o7O0FBRUU7RUFDRSxxQkFBQTtFQUNBLDZCQUFBO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJoMXtcclxuICAgIG1hcmdpbi1sZWZ0OiAxLjVyZW07XHJcbiAgICBmb250LXNpemU6IDI0cHg7XHJcbiAgICBmb250LXdlaWdodDogNzAwO1xyXG4gICAgY29sb3I6ICMwNDM4M2Y7XHJcbn1cclxuXHJcbi5jYXJkLWJvZHl7XHJcbiAgICBmb250LXdlaWdodDogNTA7XHJcbiAgICBjb2xvcjogIzA0MzgzZjtcclxufVxyXG5cclxuLmNhcmQtaGVhZHtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgY29sb3I6ICMwNDM4M2Y7XHJcbn1cclxuXHJcbmlucHV0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgI2FhYTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBtYXJnaW46IDhweCAwO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICB0cmFuc2l0aW9uOiAwLjNzO1xyXG4gIH1cclxuICBcclxuICBpbnB1dDpmb2N1cyB7XHJcbiAgICBib3JkZXItY29sb3I6ICMwNDM4M2Y7XHJcbiAgICBib3gtc2hhZG93OiAwIDAgOHB4IDAgIzA0MzgzZjtcclxuICB9XHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;AASA,OAAM,MAAOA,mBAAmB;EAyE9BC,YAAoBC,iBAA2C;IAA3C,sBAAiB,GAAjBA,iBAAiB;IAxEvC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqEU,aAAQ,GAAgB,IAAI;IAC5B,cAAS,GAAgB,IAAI;EAIrC;EAEAC,QAAQ,IAAK;EAEbC,gBAAgB,CAACC,KAAU,EAAEC,UAAwB;IACnD,MAAMC,KAAK,GAAoBF,KAAK,EAAEG,MAAM,EAAED,KAAK;IACnD,IAAIA,KAAK,EAAEE,MAAM,EAAE;MACjB,MAAMC,iBAAiB,GAAG,CAAC,KAAK,CAAC;MACjC,MAAMC,aAAa,GAAGC,KAAK,CAACC,IAAI,CAACN,KAAK,CAAC;MACvC,MAAMO,iBAAiB,GAAGH,aAAa,CAACI,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC;MAC9D,MAAMC,YAAY,GAAGJ,iBAAiB,CAACK,MAAM,CAACF,IAAI,IAAG;QACnD,MAAMG,SAAS,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE;QACvC,OAAOF,SAAS,IAAI,CAACV,iBAAiB,CAACa,QAAQ,CAACH,SAAS,CAAC;MAC5D,CAAC,CAAC;MAEF,IAAIF,YAAY,CAACT,MAAM,GAAG,CAAC,EAAE;QAC3Be,OAAO,CAACC,GAAG,CAAC,WAAWnB,UAAU,WAAWY,YAAY,CAACQ,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;QACtE;;MAGF,IAAIpB,UAAU,KAAK,IAAI,EAAE;QACvB,IAAI,CAACqB,QAAQ,GAAGhB,aAAa,CAAC,CAAC,CAAC;OACjC,MAAM,IAAIL,UAAU,KAAK,KAAK,EAAE;QAC/B,IAAI,CAACsB,SAAS,GAAGjB,aAAa,CAAC,CAAC,CAAC;;;EAGvC;EAIAkB,QAAQ;IACN,IAAI,IAAI,CAACF,QAAQ,IAAI,IAAI,CAACC,SAAS,EAAE;MAEnC,IAAI,CAAC1B,iBAAiB,CAAC4B,iBAAiB,CAAC,IAAI,CAACH,QAAQ,EAAE,IAAI,CAACC,SAAS,CAAC;MAInEJ,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;;EAEzB;;AAlHWzB,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;QAAnBA,mBAAmB;EAAA+B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCThCC,0BAAI;MAAAA,yBAAS;MAAAA,iBAAK;MAClBA,qBAAI;MACJA,8BAAkB;MACSA,uEAAuD;MAAAA,iBAAM;MACpFA,8BAAuB;MAGDA,wBAAQ;MAAAA,iBAAQ;MAClCA,gCAAgG;MAA7EA;QAAA,OAAUC,6BAAyB,IAAI,CAAC;MAAA,EAAC;MAA5DD,iBAAgG;MAEhGA,iCAAkB;MAAAA,0BAAS;MAAAA,iBAAQ;MACnCA,iCAAiG;MAA9EA;QAAA,OAAUC,6BAAyB,KAAK,CAAC;MAAA,EAAC;MAA7DD,iBAAiG;MAEjGA,kCAA8J;MAAxIA;QAAA,OAASC,cAAU;MAAA,EAAC;MAAoHD,uBAAM;MAAAA,iBAAS;MAIrLA,+BAAkB;MACSA,wBAAO;MAAAA,iBAAM;MACpCA,+BAAuB;MAInBA,0OACJ;MAAAA,iBAAM;MAEVA,+BAAkB;MACSA,iCAAgB;MAAAA,iBAAM;MAC7CA,+BAAuB;MACnBA,0OACJ;MAAAA,iBAAM;MAEVA,sBAAI","names":["StatisticsComponent","constructor","predictionService","ngOnInit","onFolderSelected","event","folderType","files","target","length","allowedExtensions","selectedFiles","Array","from","selectedFileNames","map","file","name","invalidFiles","filter","extension","split","pop","includes","console","log","join","ctFolder","petFolder","onUpload","predictionResults","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["D:\\Angular\\FYP\\FYPheheApp\\imadotAngular\\src\\app\\statistics\\statistics.component.ts","D:\\Angular\\FYP\\FYPheheApp\\imadotAngular\\src\\app\\statistics\\statistics.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { PredictionServiceService } from '../path/prediction-service.service';\n\n@Component({\n  selector: 'app-statistics',\n  templateUrl: './statistics.component.html',\n  styleUrls: ['./statistics.component.scss']\n})\nexport class StatisticsComponent implements OnInit {\n/*\n  CT_folder: string | null = null;\n  PET_folder: string | null = null;\n // plotUrl!: string;\n // input_dir = '../dummyData/A200';\n // imageURL!: string;\n\n//  constructor(private http: HttpClient) { }\n  constructor() { }\n  \n  ngOnInit() {\n    //const inputDir = '../dummyData/A200';\n    // Set the URL of the API endpoint that returns the plot data\n    //this.plotUrl = `/api/plot?input_dir=${this.input_dir}`;\n  }\n  \n  \n  //we take CT and PET folder input here and \n  onFileSelected(event: any, folderType: string) {\n    const files = event.target.files;\n    const fileArr = Array.prototype.slice.call(files);\n  \n    // Check if all files in folder are DICOM format\n    const invalidFiles = fileArr.filter(file => !file.name.endsWith('.dcm'));\n    if (invalidFiles.length > 0) {\n      alert(`Invalid files in ${folderType} folder. Only DICOM files are allowed.`);\n      return;\n    }\n\n    // Store folder path based on folder type\n    if (folderType === 'CT') {\n    this.CT_folder = files[0].webkitRelativePath.split(files[0].name)[0];\n    } else if (folderType === 'PET') {\n      this.PET_folder = files[0].webkitRelativePath.split(files[0].name)[0];\n    }\n\n  }\n  \n  //to prediction\n  onUpload() {\n    // Check if both folders are selected\n    if (!this.CT_folder || !this.PET_folder) {\n      alert('Please select both CT and PET folders.');\n      return;\n    }\n  \n    console.log(\"onUpload() ok\");\n\n    if (this.CT_folder.length > 0 && this.PET_folder.length > 0) {\n      const CTData = new FormData();\n      const PETData = new FormData();\n      for (let i = 0; i < this.CT_folder.length; i++) {\n        CTData.append(\"file[]\", this.CT_folder[i], this.CT_folder[i].name);\n      }\n      // Call your service method and pass formData as parameter\n      this.myService.uploadFolder(formData).subscribe(result => {\n        console.log(result);\n      });\n    }\n\n    // Call prediction class with folder paths\n    //this.predictionService.predict(this.CT_folder, this.PET_folder).subscribe(result => {\n      // handle result here\n    //}, error => {\n    //  console.log(error);\n    //});\n  }\n    */\n  \n  private ctFolder: File | null = null;\n  private petFolder: File | null = null;\n\n  constructor(private predictionService: PredictionServiceService) {\n\n  }\n\n  ngOnInit() { }\n \n  onFolderSelected(event: any, folderType: 'CT' | 'PET') {\n    const files: FileList | null = event?.target?.files;\n    if (files?.length) {\n      const allowedExtensions = ['dcm'];\n      const selectedFiles = Array.from(files);\n      const selectedFileNames = selectedFiles.map(file => file.name);\n      const invalidFiles = selectedFileNames.filter(name => {\n        const extension = name.split('.').pop();\n        return extension && !allowedExtensions.includes(extension);\n      });\n  \n      if (invalidFiles.length > 0) {\n        console.log(`Invalid ${folderType} files: ${invalidFiles.join(', ')}`);\n        return;\n      }\n  \n      if (folderType === 'CT') {\n        this.ctFolder = selectedFiles[0];\n      } else if (folderType === 'PET') {\n        this.petFolder = selectedFiles[0];\n      }\n    }\n  }\n   \n  \n\n  onUpload() {\n    if (this.ctFolder && this.petFolder) {\n    \n      this.predictionService.predictionResults(this.ctFolder, this.petFolder)\n        //.subscribe(result => {\n        //console.log(result);\n        //});\n        ; console.log(\"ok\");\n    }\n  }\n\n}\n","<h1>Diagnosis</h1>\n<hr>\n<div class=\"card\">\n    <div class=\"card-head\">Please upload CT and PET scans in the respective fields</div>\n    <div class=\"card-body\">\n\n        \n        <label for=\"ctrl\">CT Scans</label>\n        <input type=\"file\" (change)=\"onFolderSelected($event, 'CT')\" webkitdirectory directory required>\n\n        <label for=\"ctrl\">PET Scans</label>\n        <input type=\"file\" (change)=\"onFolderSelected($event, 'PET')\" webkitdirectory directory required>\n\n        <button type=\"submit\" (click)=\"onUpload()\" style=\"background-color: #04383f; color: aliceblue; margin: 5px; border-radius: 5px; width: 150px; height: 25px; \">Upload</button>\n        \n    </div>\n</div>\n<div class=\"card\">\n    <div class=\"card-head\">Results</div>\n    <div class=\"card-body\">\n        <!--\n        <img [src]=\"'/api/plot?input_dir=' + input_dir\" />\n        -->\n        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quas ducimus soluta, quasi aut ipsa non, ullam enim rem repudiandae, vitae provident animi. Inventore rerum, voluptas optio dignissimos blanditiis modi illo!\n    </div>\n</div>\n<div class=\"card\">\n    <div class=\"card-head\">3D visualization</div>\n    <div class=\"card-body\">\n        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quas ducimus soluta, quasi aut ipsa non, ullam enim rem repudiandae, vitae provident animi. Inventore rerum, voluptas optio dignissimos blanditiis modi illo!\n    </div>\n</div>\n<br><br>\n<hr>\n<br>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}